define("WoltLabSuite/Core/Conversation/Ui/Participant/Add",["Ajax","Language","Ui/Dialog","Ui/Notification","WoltLabSuite/Core/Ui/ItemList/User"],function(t,e,n,i,a){"use strict";function o(t){this.init(t)}return o.prototype={init:function(e){this._conversationId=e,t.api(this,{actionName:"getAddParticipantsForm"})},_ajaxSetup:function(){return{data:{className:"wcf\\data\\conversation\\ConversationAction",objectIDs:[this._conversationId]}}},_ajaxSuccess:function(t){switch(t.actionName){case"addParticipants":this._handleResponse(t);break;case"getAddParticipantsForm":this._render(t)}},_handleResponse:function(t){t.returnValues.count&&i.show(t.returnValues.successMessage,window.location.reload.bind(window.location)),n.close(this)},_render:function(t){n.open(this,t.returnValues.template);var e=document.getElementById("addParticipants");e.disabled=!0,a.init("participantsInput",{callbackChange:function(t,n){e.disabled=0===n.length},excludedSearchValues:t.returnValues.excludedSearchValues,maxItems:t.returnValues.maxItems}),e.addEventListener("click",this._submit.bind(this))},_submit:function(){for(var e=a.getValues("participantsInput"),n=[],i=0,o=e.length;i<o;i++)n.push(e[i].value);t.api(this,{actionName:"addParticipants",parameters:{participants:n}})},_dialogSetup:function(){return{id:"conversationAddParticipants",options:{title:e.get("wcf.conversation.edit.addParticipants")},source:null}}},o}),define("WoltLabSuite/Core/Conversation/Ui/Subject/Editor",["Ajax","EventKey","Language","Ui/Dialog","Ui/Notification"],function(t,e,n,i,a){"use strict";var o=0,s=null;return{beginEdit:function(t){o=t,i.open(this)},_saveEdit:function(e){e.preventDefault();var i=s.nextElementSibling;i&&i.classList.contains("innerError")&&elRemove(i);var a=s.value.trim();""===a?(i=elCreate("small"),i.className="innerError",i.textContent=n.get("wcf.global.form.error.empty"),s.parentNode.insertBefore(i,s.nextElementSibling)):t.api(this,{parameters:{subject:a},objectIDs:[o]})},_getCurrentValue:function(){var t="";return elBySelAll('.jsConversationSubject[data-conversation-id="'+o+'"], .conversationLink[data-conversation-id="'+o+'"]',void 0,function(e){t=e.textContent}),t},_ajaxSuccess:function(t){i.close(this),elBySelAll('.jsConversationSubject[data-conversation-id="'+o+'"], .conversationLink[data-conversation-id="'+o+'"]',void 0,function(e){e.textContent=t.returnValues.subject}),a.show()},_dialogSetup:function(){return{id:"dialogConversationSubjectEditor",options:{onSetup:function(t){s=elById("jsConversationSubject"),s.addEventListener("keyup",function(t){e.Enter(t)&&this._saveEdit(t)}.bind(this)),elBySel(".jsButtonSave",t).addEventListener(WCF_CLICK_EVENT,this._saveEdit.bind(this))}.bind(this),onShow:function(){s.value=this._getCurrentValue()}.bind(this),title:n.get("wcf.conversation.edit.subject")},source:'<dl><dt><label for="jsConversationSubject">'+n.get("wcf.global.subject")+'</label></dt><dd><input type="text" id="jsConversationSubject" class="long" maxlength="255"></dd></dl><div class="formSubmit"><button class="jsButtonSave">'+n.get("wcf.global.button.save")+"</button></div>"}},_ajaxSetup:function(){return{data:{actionName:"editSubject",className:"wcf\\data\\conversation\\ConversationAction"}}}}});